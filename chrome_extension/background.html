<html>
<head>
	<script>

	
// Right click http://stackoverflow.com/questions/4376167/text-selection-and-display-in-context-menu-chrome-extension
// contexts: http://code.google.com/chrome/extensions/beta/contextMenus.html#examples
// http://code.google.com/chrome/extensions/samples.html#5d81304a17cf7ac2887484f730fbd2b01e51e166
chrome.contextMenus.create({"title": "Encrypt", "contexts":["selection", "editable"], "onclick": genericOnClick});
chrome.contextMenus.create({"title": "Decrypt", "contexts":["selection", "editable"], "onclick": genericOnClick});



function genericOnClick(info, tab) {

//alert("background: " + info.selectionText);
//alert(JSON.stringify(info));

// Send to content script  
chrome.tabs.getSelected(null, function(tab) {

  chrome.tabs.sendRequest(tab.id, {greeting: info.selectionText, action: info.menuItemId}, function(response) {
    console.log(response.farewell);
  });
 
});
  
}  
	
	</script>
	
</head>
<body>
</body>
</html>